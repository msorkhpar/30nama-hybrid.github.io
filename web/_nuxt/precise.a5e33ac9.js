import{_ as S}from"./TitleList.vue.0fbe722d.js";import{d as C,b as $,c as k,aw as A,C as B,U as N,u as L,l as P,r as d,aE as E,Y as H,E as I,o as p,e as y,g as o,f as v,t as q,x as j,L as D,I as T}from"./entry.63203ae2.js";import"./BaseTitleFrame.477391a6.js";import"./BaseScore.vue.979d75d4.js";import"./nuxt-link.bc2b4c04.js";import"./ContentPop-v2.vue.b876de76.js";function x(r){let n,s=r[0],l=1;for(;l<r.length;){const t=r[l],h=r[l+1];if(l+=2,(t==="optionalAccess"||t==="optionalCall")&&s==null)return;t==="access"||t==="optionalAccess"?(n=s,s=h(s)):(t==="call"||t==="optionalCall")&&(s=h((...g)=>s.call(n,...g)),n=void 0)}return s}const U={class:"flex min-h-full w-full flex-col"},F={key:0,class:"flex h-full w-full items-center justify-center"},K={class:"text-fonts-700 text-5xl font-bold"},M={key:1,class:"flex h-full w-full items-center justify-center"},O={class:"text-fonts-700 text-5xl font-bold"},W=C({__name:"precise",setup(r){const{t:n}=$();k({title:()=>`${n("seo.30nama")} | ${n("seo.search")}`});const s=A(),l=B(),t=N(),{infiniteScrolling:h}=L(),g=P(()=>!!t.query.q&&x([t,"access",e=>e.query,"access",e=>e.q,"optionalAccess",e=>e.trim,"call",e=>e(),"access",e=>e.length])>=3),m=d(g.value),c=d(Number(t.query.page||"1")),i=d({}),b=d(),w=d("");async function _(e,u){if(!e.trim()||e.trim().length<3)return;e!==w.value&&(i.value={},w.value=e),m.value=!0;const a=await D(`SEARCH::${e}::${u}`,()=>T.API.actions.search(e,!1,u));if(!(t.query.q!==e||t.query.page&&Number(t.query.page)!==u)&&(m.value=!1,!!a)){if(a.error)return l(a.msg,"ERROR");i.value[u]=a.result.posts,b.value={pages:a.result.pages,page:a.result.page,total:a.result.total}}}function R(e){t.query.q&&_(t.query.q,e)}return E(()=>t.query.q,e=>{e&&_(e,c.value)},{debounce:300,immediate:!0}),H(()=>t.query.page,e=>{h.value||(c.value=e?Number(e):1,t.query.q&&_(t.query.q,c.value))}),I(()=>{const{replaceLastRoute:e}=s;e(t.fullPath)}),(e,u)=>{const a=S;return p(),y("div",U,[o(g)?!x([o,"call",f=>f(i),"access",f=>f[o(c)],"optionalAccess",f=>f.length])&&!o(m)?(p(),y("span",M,[v("h4",O,q(o(i)[o(c)]?e.$t("noResult"):e.$t("searchNow")),1)])):(p(),j(a,{key:2,id:"title-list-result",title:e.$t("searchResults"),aligned:"",icon:"ph:magnifying-glass-fill",style:{background:"bg-bg-12",foreground:"bg-bg-11",shadowBack:"shadow-bg-12",shadowFore:"shadow-bg-11"},"is-loading":o(m),data:o(i),"result-info":o(b),onPageChanged:R},null,8,["title","is-loading","data","result-info"])):(p(),y("span",F,[v("h4",K,q(e.$t("searchNow")),1)]))])}}});export{W as default};
