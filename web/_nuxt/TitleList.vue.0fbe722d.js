import{_ as q}from"./BaseTitleFrame.477391a6.js";import{_ as R}from"./nuxt-link.bc2b4c04.js";import{d as L,r as A,Y as T,q as z,o as i,e as u,h as k,w as $,G as V,Q as d,g as f,y as _,M as B,N as I,t as E,f as p,x as P,a8 as N,l as G,ay as S,ar as F,at as H,aF as j,aG as M,aH as O,U as Z,u as D,aj as Q}from"./entry.63203ae2.js";import{_ as U}from"./ContentPop-v2.vue.b876de76.js";const Y={key:0},J={key:1},K={key:2},W={key:3},X=L({__name:"BasePagination",props:{maxPage:{default:1},yield:{type:Boolean},selectedPage:{default:1},isLoading:{type:Boolean}},emits:["pageChanged"],setup(m,{emit:g}){const s=m,e=A(1);async function n(r){s.yield||e.value===r||(await new Promise(t=>setTimeout(t,25)),e.value=r,g("pageChanged",r))}function o(){return e.value<=3?3:e.value}function c(r){const t=[];for(const y of r)y>0&&y<=s.maxPage&&t.push(y);return t}function h(){const r=[o()-2,o()-1,o(),o()+1,o()+2];if(r.length===5&&s.maxPage===5)return c([1,2,3,4,5]);for(const t in r)if(r[t]>=s.maxPage){if(t==="3")return c([o()-3,o()-2,o()-1,o(),o()+1]);if(t==="2")return c([o()-4,o()-3,o()-2,o()-1,o()])}return r}return T(()=>s.selectedPage,()=>{e.value=s.selectedPage}),z(()=>e.value=s.selectedPage),(r,t)=>{const y=R;return i(),u("ul",{class:d(["local-numbers flex flex-row items-center gap-1 text-base",{"disable-block":r.isLoading}]),dir:"ltr"},[h()[0]>1?(i(),u("li",Y,[k(y,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===1}]),to:{query:{...r.$route.query,page:1}},onClick:t[0]||(t[0]=a=>n(1))},{default:$(()=>[V(" 1 ")]),_:1},8,["class","to"])])):_("",!0),h()[0]>1?(i(),u("li",J," ... ")):_("",!0),(i(!0),u(B,null,I(h(),a=>(i(),u("li",{key:a.id},[k(y,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===a}]),to:{query:{...r.$route.query,page:a}},onClick:l=>n(a)},{default:$(()=>[V(E(a.toString()),1)]),_:2},1032,["class","to","onClick"])]))),128)),f(e)+2<r.maxPage&&r.maxPage>5?(i(),u("li",K," ... ")):_("",!0),f(e)+2<r.maxPage&&r.maxPage>5?(i(),u("li",W,[k(y,{class:d(["hover:bg-bg-10/70 flex min-w-[2em] shrink-0 items-center justify-center rounded-xl px-2 py-1 transition-colors",{"bg-primary-500 hover:bg-primary-500 !rounded-xl text-white":f(e)===r.maxPage}]),to:{query:{...r.$route.query,page:r.maxPage}},onClick:t[1]||(t[1]=a=>n(r.maxPage))},{default:$(()=>[V(E(r.maxPage.toString()),1)]),_:1},8,["class","to"])])):_("",!0)],2)}}});function b(m){let g,s=m[0],e=1;for(;e<m.length;){const n=m[e],o=m[e+1];if(e+=2,(n==="optionalAccess"||n==="optionalCall")&&s==null)return;n==="access"||n==="optionalAccess"?(g=s,s=o(s)):(n==="call"||n==="optionalCall")&&(s=o((...c)=>s.call(g,...c)),g=void 0)}return s}const ee={class:"titles-renderer-group"},te={role:"none",class:"pointer-events-none absolute top-1/2 z-10 -translate-y-1/2 ltr:-left-8 rtl:-right-8"},ae=p("path",{d:"M0 30.5C9.52005 21.5889 4.18533 11.5501 0 8V30.5Z"},null,-1),se=p("path",{d:"M3 11.5C2 10.3333 0 6.4 0 0V8L3 11.5Z"},null,-1),ne=p("path",{d:"M3 27C2 28.1667 0 32 0 38V30.5L3 27Z"},null,-1),le=[ae,se,ne],oe={class:"local-numbers absolute top-1/2 z-10 -translate-y-1/2 text-2xl font-semibold ltr:left-0 rtl:right-0"},re=L({__name:"TitlesRendererGroup",props:{isLoading:{type:Boolean},visible:{type:Boolean},transparent:{type:Boolean},page:{},items:{}},emits:["onInView","reachedEnd"],setup(m,{emit:g}){const s=m,e=A({firstEntry:s.items[0],lastEntry:s.items[s.items.length-1],entries:s.items.slice(1,s.items.length-1)}),n=A(null),o=A(null),c=A(null),h=new IntersectionObserver(a=>a.map(r),{threshold:0});function r(a){if(a.target.getAttribute("data-is-skeleton"))return a.isIntersecting?g("onInView"):null;a.target.getAttribute("data-is-first")&&(a.positionInGroup="start"),a.target.getAttribute("data-is-last")&&(a.positionInGroup="end"),a.isIntersecting&&a.positionInGroup==="end"&&g("reachedEnd")}async function t(){c.value&&b([h,"optionalAccess",a=>a.unobserve,"call",a=>a(c.value)]),await N(),n.value&&b([h,"optionalAccess",a=>a.observe,"call",a=>a(b([n,"access",l=>l.value,"optionalAccess",l=>l.$el]))]),o.value&&b([h,"optionalAccess",a=>a.observe,"call",a=>a(b([o,"access",l=>l.value,"optionalAccess",l=>l.$el]))])}async function y(){n.value&&b([h,"optionalAccess",a=>a.unobserve,"call",a=>a(b([n,"access",l=>l.value,"optionalAccess",l=>l.$el]))]),o.value&&b([h,"optionalAccess",a=>a.unobserve,"call",a=>a(b([o,"access",l=>l.value,"optionalAccess",l=>l.$el]))]),await N(),c.value&&b([h,"optionalAccess",a=>a.observe,"call",a=>a(c.value)])}return z(()=>{s.isLoading?y():t()}),T(()=>s.isLoading,a=>{a?y():t()}),(a,l)=>{const v=q;return i(),u("div",ee,[p("div",{class:d(["relative flex h-24 w-full items-center px-6",{invisible:a.page===1}])},[p("span",te,[(i(),u("svg",{role:"none",class:d(["fill-bg-12 h-full w-8 transform-gpu will-change-transform rtl:rotate-180",{hidden:a.transparent}]),viewBox:"0 0 6 38",xmlns:"http://www.w3.org/2000/svg"},le,2)),p("span",oe,E(a.page),1)]),p("span",{class:d(["bg-bg-12 block h-2 w-[10%] overflow-hidden rounded-full ltr:origin-left rtl:origin-right",{"!bg-bg-11":a.transparent}])},null,2)],2),a.isLoading?(i(),u("div",{key:1,ref_key:"skeletonComponent",ref:c,class:d([{"-translate-y-24":a.page===1},"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"]),"data-is-skeleton":"true"},[(i(!0),u(B,null,I(a.items.length,x=>(i(),P(v,{key:x,size:"medium","is-loading":""}))),128))],2)):(i(),u("div",{key:0,class:d([{"-translate-y-24":a.page===1},"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"])},[k(v,{ref_key:"firstTitleComponent",ref:n,size:"medium","data-is-first":"true",data:f(e).firstEntry},null,8,["data"]),(i(!0),u(B,null,I(f(e).entries,(x,C)=>(i(),P(v,{key:C,size:"medium",data:x},null,8,["data"]))),128)),a.items.length>1?(i(),P(v,{key:0,ref_key:"lastTitleComponent",ref:o,size:"medium","data-is-last":"true",data:f(e).lastEntry},null,8,["data"])):_("",!0)],2))])}}}),ie=L({__name:"TitlesRenderer",props:{maxPage:{},data:{},transparent:{type:Boolean},isLoading:{type:Boolean}},emits:["loadNextPage"],setup(m,{emit:g}){const s=m,e=G(()=>{const l=Object.keys(s.data).map(v=>Number(v));return l.length?Math.max(...l):0}),n=G(()=>{const l=[];for(let v=1;v<=e.value;v++)l.push(s.data[v]);return l});function o(l){l>=s.maxPage||s.data[l+1]||g("loadNextPage",l+1)}const c=A(1496);function h(){const l=document.querySelectorAll(".titles-renderer-group");return l.length?l[l.length-1].clientHeight:0}function r(){e.value>=s.maxPage||s.isLoading||g("loadNextPage",e.value+1)}let{list:t,containerProps:y,wrapperProps:a}=S(n,{itemHeight:c.value,overscan:3});return F(window,"resize",H(()=>c.value=h(),1e3)),T(c,()=>{const l=S(n,{itemHeight:c.value});t=l.list,y=l.containerProps,a=l.wrapperProps}),z(async()=>{await N(),c.value=h()}),(l,v)=>{const x=re;return i(),u("div",null,[p("div",O(f(y),{class:"hide-scrollbar h-full transform-gpu p-8"}),[p("div",j(M(f(a))),[(i(!0),u(B,null,I(f(t),C=>(i(),P(x,{key:C.index,transparent:l.transparent,page:Number(C.index+1),items:C.data,onReachedEnd:ge=>o(Number(C.index+1))},null,8,["transparent","page","items","onReachedEnd"]))),128)),f(e)<l.maxPage?(i(),P(x,{key:0,page:f(e)+1,transparent:l.transparent,items:Array(24).fill({}),"is-loading":!0,onOnInView:r},null,8,["page","transparent","items"])):_("",!0)],16)],16)])}}});function w(m){let g,s=m[0],e=1;for(;e<m.length;){const n=m[e],o=m[e+1];if(e+=2,(n==="optionalAccess"||n==="optionalCall")&&s==null)return;n==="access"||n==="optionalAccess"?(g=s,s=o(s)):(n==="call"||n==="optionalCall")&&(s=o((...c)=>s.call(g,...c)),g=void 0)}return s}const ue={class:"flex w-full flex-col"},ce={key:0,class:"flex w-full pb-24"},de={key:0,class:"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"},pe={key:1,class:"title-list grid w-full grid-cols-[repeat(auto-fit,minmax(200px,1fr))] place-items-center"},ve=L({__name:"TitleList",props:{title:{},icon:{},style:{},aligned:{type:Boolean},transparent:{type:Boolean},secondaryTitleType:{type:Boolean},data:{},resultInfo:{},isLoading:{type:Boolean}},emits:["pageChanged"],setup(m){const g=Z(),{infiniteScrolling:s}=D();return T(()=>g.query.page,e=>{s.value||w([document,"access",n=>n.getElementById,"call",n=>n("main-content-app"),"optionalAccess",n=>n.scrollIntoView,"call",n=>n({behavior:"smooth"})])}),(e,n)=>{const o=q,c=X,h=ie,r=U;return i(),u("div",{id:"title-list-result",class:d(["mt-[-2.4rem] flex w-full flex-shrink-0 flex-col gap-20",{"!mt-[-4.7rem]":e.aligned}])},[k(r,{title:e.title,foreground:w([e,"access",t=>t.style,"optionalAccess",t=>t.foreground]),"shadow-background":w([e,"access",t=>t.style,"optionalAccess",t=>t.shadowFore]),transparent:e.transparent,"secondary-title-type":e.secondaryTitleType,icon:e.icon,class:"h-[calc(100%_+_3.1rem)]"},{header:$(()=>[Q(e.$slots,"header")]),content:$(()=>[p("div",ue,[f(s)?_("",!0):(i(),u("div",ce,[e.isLoading?(i(),u("div",de,[(i(),u(B,null,I(24,t=>k(o,{key:t,"is-loading":"",size:"medium"})),64))])):(i(),u("div",pe,[(i(!0),u(B,null,I(e.resultInfo?e.data[e.resultInfo.page]:[],t=>(i(),P(o,{key:t.id,size:"medium",data:t},null,8,["data"]))),128))]))])),!f(s)&&e.resultInfo?(i(),u("div",{key:1,class:d(["absolute bottom-0 left-1/2 flex h-12 -translate-x-1/2 justify-center px-8",w([e,"access",t=>t.style,"optionalAccess",t=>t.background])])},[p("span",{class:d([{hidden:e.transparent},"absolute top-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:left-0 rtl:right-0"])},[p("span",{class:d(["absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:left-0 rtl:right-0",w([e,"access",t=>t.style,"optionalAccess",t=>t.shadowFore])])},null,2)],2),p("span",{class:d([{hidden:e.transparent},"absolute top-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:right-0 rtl:left-0"])},[p("span",{class:d(["absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:right-0 rtl:left-0",w([e,"access",t=>t.style,"optionalAccess",t=>t.shadowFore])])},null,2)],2),p("span",{class:d([{hidden:e.transparent},"absolute bottom-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:right-full rtl:left-full"])},[p("span",{class:d(["absolute bottom-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:right-0 rtl:left-0",w([e,"access",t=>t.style,"optionalAccess",t=>t.shadowBack])])},null,2)],2),p("span",{class:d([{hidden:e.transparent},"absolute bottom-0 h-[1.5em] w-[1.5em] overflow-hidden ltr:left-full rtl:right-full"])},[p("span",{class:d(["absolute bottom-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:left-0 rtl:right-0",w([e,"access",t=>t.style,"optionalAccess",t=>t.shadowBack])])},null,2)],2),k(c,{"max-page":e.resultInfo.pages,"is-loading":e.isLoading,"selected-page":e.resultInfo.page,onPageChanged:n[0]||(n[0]=t=>e.$emit("pageChanged",t))},null,8,["max-page","is-loading","selected-page"])],2)):_("",!0),f(s)?(i(),P(h,{key:2,class:d(["h-[calc(100vh_-_11.4em_-_1.5em_-_var(--header-size)_*_1px)]",{"!h-[calc(100vh_-_11.4em_+_2.3em_-_var(--header-size)_*_1px)]":e.aligned}]),"is-loading":e.isLoading,transparent:e.transparent,data:e.data,"max-page":w([e,"access",t=>t.resultInfo,"optionalAccess",t=>t.pages])||1,onLoadNextPage:n[1]||(n[1]=t=>e.$emit("pageChanged",t))},null,8,["class","is-loading","transparent","data","max-page"])):_("",!0)])]),_:3},8,["title","foreground","shadow-background","transparent","secondary-title-type","icon"])],2)}}});export{ve as _};
